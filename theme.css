/* Snow-Sled Theme 
    Author: Fraser Levack
    A winter-inspired palette for Obsidian with smooth frosty animations.
*/

/*Fonts*/
:root {
    --default-font: "Inter", sans-serif;
    --font-monospace: "Source Code Pro", monospace;
}

/* Global Variables - Shared between themes */
body {
    --font-text-size: 16px;
    --snow-accent: #a5d8ff;
    --ice-blue: #74c0fc;
    --deep-frost: #1971c2;
    /* Animation Speeds */
    --anims-slow: 0.5s ease;
    --anims-fast: 0.2s ease;
    --anims-bounce: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Dark Theme Variables: Midnight Blizzard */
.theme-dark {
    --background-modifier-cover: rgba(10, 15, 20, 0.8); 
    --background-primary: #1a1c22; 
    --background-primary-alt: #21252b; 
    --background-secondary: #14161a; 
    --background-secondary-alt: #0d0f12; 
    --background-modifier-border: #2f3542; 
    
    --text-normal: #e9ecef; 
    --text-muted: #adb5bd; 
    --text-accent: #74c0fc; 
    --text-accent-hover: #a5d8ff; 
    --text-faint: #495057; 

    --text-highlight-bg: rgba(116, 192, 252, 0.3); 
    --text-highlight-bg-active: rgba(116, 192, 252, 0.5);
    --text-selection: rgba(77, 171, 247, 0.3);

    --interactive-normal: #2c323a; 
    --interactive-hover: #373e47; 
    --interactive-accent: #1971c2; 
    --interactive-accent-hover: #228be6; 
    
    --scrollbar-bg: rgba(255, 255, 255, 0.03); 
    --scrollbar-thumb-bg: rgba(255, 255, 255, 0.1); 
    --scrollbar-active-thumb-bg: rgba(165, 216, 255, 0.2); 
}

/* Light Theme Variables: Fresh Powder */
.theme-light {
    --background-primary: #f8f9fa; 
    --background-primary-alt: #ffffff; 
    --background-secondary: #e9ecef; 
    --background-secondary-alt: #dee2e6; 
    --background-modifier-border: #ced4da; 

    --text-normal: #212529; 
    --text-muted: #495057; 
    --text-accent: #1971c2; 
    --text-accent-hover: #1864ab; 
    --text-faint: #adb5bd; 

    --text-highlight-bg: rgba(165, 216, 255, 0.4); 
    --text-highlight-bg-active: rgba(116, 192, 252, 0.5);
    --text-selection: rgba(165, 216, 255, 0.4);
    
    --interactive-normal: #f1f3f5; 
    --interactive-hover: #e9ecef; 
    --interactive-accent: #1971c2; 
    --interactive-accent-hover: #1864ab; 
    
    --scrollbar-bg: rgba(0, 0, 0, 0.03); 
    --scrollbar-thumb-bg: rgba(0, 0, 0, 0.08); 
    --scrollbar-active-thumb-bg: rgba(25, 113, 194, 0.15); 
}

/*---- Global Transitions ----*/
/* This makes the theme switching feel like a smooth fade */
* {
    transition: background-color var(--anims-fast), color var(--anims-fast), border-color var(--anims-fast);
}

/*---- Keyframes for Animations ----*/
@keyframes snow-drift {
    0% { background-position: 0% 0%; }
    100% { background-position: 100% 100%; }
}

@keyframes phase-blink {
    0%, 100% { opacity: 1; transform: scaleY(1); }
    50% { opacity: 0.1; transform: scaleY(0.95); }
}

@keyframes frost-glow {
    0% { text-shadow: 0 0 0px transparent; }
    100% { text-shadow: 0 0 10px var(--snow-accent); }
}

/*---- Startup Progress Bar ----*/
.progress-bar-indicator .progress-bar-subline {
    background-color: var(--ice-blue) !important;
    box-shadow: 0 0 12px var(--snow-accent);
    /* Adding a subtle 'snowflake' texture to the loading bar */
    background-image: radial-gradient(circle, #ffffff 10%, transparent 20%);
    background-size: 15px 15px;
    animation: snow-drift 3s linear infinite;
}

/*---- Smooth Pulse Cursor ----*/
.cm-cursorLayer .cm-cursor {
    border-left: 2px solid var(--text-accent) !important;
    animation: phase-blink 1.5s ease-in-out infinite !important;
}

/*---- Workspace & UI Elements ----*/
.workspace-leaf, .workspace-tab-header, .nav-file-title, .nav-folder-title, .menu-item {
    transition: all var(--anims-fast);
}

/* Navigation Hover Effects */
.nav-file-title:hover, .nav-folder-title:hover {
    background-color: var(--background-primary-alt);
    color: var(--text-accent);
    padding-left: 10px; /* Subtle slide effect */
}

/* Buttons and Clickables */
button, .mod-cta, .mod-warning {
    transition: transform 0.1s var(--anims-bounce), background-color var(--anims-fast);
}

button:hover {
    transform: translateY(-1px);
    background-color: var(--interactive-hover);
}

button:active {
    transform: translateY(1px);
}

/* Settings Modal Animation */
.modal {
    animation: fadeIn var(--anims-fast);
    border: 1px solid var(--background-modifier-border);
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

/* ---- Header Hierarchy & Frost Lines ---- */

/* 1. Base Header Styles (Color & Weight) */
.cm-header-1, .markdown-rendered h1 { color: var(--deep-frost); font-weight: 800; font-size: 2em; }
.cm-header-2, .markdown-rendered h2 { color: var(--ice-blue); font-weight: 700; font-size: 1.75em; }
.cm-header-3, .markdown-rendered h3 { color: var(--text-accent-hover); font-weight: 700; font-size: 1.5em; }
.cm-header-4, .markdown-rendered h4 { color: var(--snow-accent); font-weight: 600; font-size: 1.3em; }

/* 2. The Frost Line (H1 & H2) */
/* We apply the line to the entire line container in the editor and the H tags in preview */
.HyperMD-header-1, .HyperMD-header-2, 
.markdown-rendered h1, .markdown-rendered h2 {
    border-bottom: 1px solid transparent;
    border-image: linear-gradient(to right, var(--ice-blue), transparent) 1;
    display: block;
    width: 100%;
    padding-bottom: 4px !important;
    margin-bottom: 10px !important;
}

/* 3. Formatting Hash Fixes (#) */
/* This ensures the hashes stay on the same line and don't get the border */
.cm-formatting-header {
    display: inline !important;
    border: none !important;
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    opacity: 0.4; /* Makes them look frosty and subtle */
}

/* 4. Fix for the "Pushing Down" issue */
/* This forces the editor to keep the hash and text on one horizontal plane */
.cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4 {
    display: inline; 
}
/* H3: Text Accent Hover - A soft, bright blue */
.cm-header-3, .markdown-rendered h3 {
    color: var(--text-accent-hover);
    font-weight: 700;
    font-size: 1.5em;
}

/* H4: Snow Accent - Very light, misty blue */
.cm-header-4, .markdown-rendered h4 {
    color: var(--snow-accent);
    font-weight: 600;
    font-size: 1.3em;
}

/* H5: Faint Frost - Almost blending with the background */
.cm-header-5, .markdown-rendered h5 {
    color: var(--text-muted); 
    font-weight: 600;
    font-size: 1.15em;
    opacity: 0.8;
}

/* H6: Ghostly White - The smallest, lightest level */
.cm-header-6, .markdown-rendered h6 {
    color: var(--text-faint);
    font-weight: 500;
    font-size: 1em;
    font-variant: small-caps; /* Adds a bit of distinction despite being faint */
}


/* Links Hover Glow */
a:hover {
    color: var(--text-accent-hover);
    animation: frost-glow 0.3s ease forwards;
}

/* Checkbox Pop Animation */
input[type=checkbox] {
    cursor: pointer;
    transition: transform 0.2s var(--anims-bounce);
}

input[type=checkbox]:checked {
    transform: scale(1.25) rotate(-3deg);
}

/* Tooltip Styling */
.tooltip {
    background-color: var(--background-secondary-alt);
    border: 1px solid var(--ice-blue);
    color: var(--text-normal);
}

/* Styling the sidebar borders and navigation */
.workspace-split.mod-vertical.mod-left-split,
.workspace-split.mod-vertical.mod-right-split {
    border-right: 1px solid var(--background-modifier-border);
    border-left: 1px solid var(--background-modifier-border);
}

/* Add a frosty "edge" to the active file explorer */
.nav-files-container {
    border-right: 2px solid transparent;
    transition: border-color var(--anims-slow);
}

/* Separators between notes */
.workspace-leaf-resize-handle {
    background-color: transparent;
    transition: background-color var(--anims-fast);
}

.workspace-leaf-resize-handle:hover {
    background-color: var(--ice-blue);
    box-shadow: 0 0 8px var(--snow-accent);
}

/* Enhanced Button Styling */
button, .mod-cta {
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background: linear-gradient(135deg, var(--interactive-normal), var(--background-secondary));
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

button:hover, .mod-cta:hover {
    border-color: var(--ice-blue);
    background: var(--interactive-hover);
    box-shadow: 0 0 10px rgba(116, 192, 252, 0.2);
}

/* Call-to-action buttons (Primary actions) */
button.mod-cta {
    background: var(--interactive-accent);
    color: white;
    border: none;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

/* Tab Header refinements */
.workspace-tab-header {
    border-bottom: 2px solid transparent;
    margin-bottom: 0;
}

.workspace-tab-header.is-active {
    border-bottom: 2px solid var(--ice-blue);
    background-color: var(--background-primary);
}

.workspace-tab-header.is-active .workspace-tab-header-inner {
    color: var(--text-accent);
}

/* Hover effect for tabs */
.workspace-tab-header:not(.is-active):hover {
    background-color: var(--background-secondary);
    color: var(--text-muted);
}

/* Modern Border Focus for Inputs */
input[type='text'], 
input[type='search'], 
.search-input-container input {
    border: 1px solid var(--background-modifier-border);
    background-color: var(--background-secondary-alt);
    transition: all var(--anims-fast);
}

input[type='text']:focus, 
input[type='search']:focus {
    border-color: var(--ice-blue);
    box-shadow: 0 0 0 3px rgba(116, 192, 252, 0.2);
    outline: none;
}